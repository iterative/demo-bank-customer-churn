schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling_0.csv
      md5: 201b3eb1d8d81aa6286466385528b3e2
      size: 342639
    - path: stages/data_split.py
      md5: 519fbe22a8ce712999f28010f3c56fe6
      size: 1606
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
    outs:
    - path: data/X_test.pkl
      md5: fd3007d1a7bdff44ff89571ebedd519e
      size: 93528
    - path: data/X_train.pkl
      md5: 56146d7dde8707b66619ce99e7cfcc20
      size: 278467
    - path: data/y_test.pkl
      md5: 745eb9da6d360516befe492af2787d41
      size: 30613
    - path: data/y_train.pkl
      md5: dbb125a59205f428a0b3e535efdfe83d
      size: 90598
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      md5: 56146d7dde8707b66619ce99e7cfcc20
      size: 278467
    - path: data/y_train.pkl
      md5: dbb125a59205f428a0b3e535efdfe83d
      size: 90598
    - path: stages/train.py
      md5: fdba70be0ebe776f64141b547ad118f1
      size: 2596
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        train:
          model_type: randomforest
          params:
            n_estimators: 35
            max_depth: 5
            warm_start: true
    outs:
    - path: model//clf-model
      md5: 0c5716d2a3fe167dcc07988bdf807cec
      size: 143913
    - path: model//clf-model.mlem
      md5: 8612ac4a8812c6de1b5883162a84f494
      size: 3090
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      md5: fd3007d1a7bdff44ff89571ebedd519e
      size: 93528
    - path: data/y_test.pkl
      md5: 745eb9da6d360516befe492af2787d41
      size: 30613
    - path: model//clf-model
      md5: 0c5716d2a3fe167dcc07988bdf807cec
      size: 143913
    - path: model//clf-model.mlem
      md5: 8612ac4a8812c6de1b5883162a84f494
      size: 3090
    - path: stages/eval.py
      md5: 0f8bd41fc66ef9117d6e3451a3ed3631
      size: 2700
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
        train:
          model_type: randomforest
          params:
            n_estimators: 35
            max_depth: 5
            warm_start: true
    outs:
    - path: eval_plots/cm.png
      md5: b616ba6a799f49184011c6362b465908
      size: 10374
    - path: eval_plots/plots/sklearn/roc.json
      md5: 624fc51062eaa42e61a4a8608425ced1
      size: 52651
    - path: feat_imp.csv
      md5: 0b0a7d4cdd8ccd4331070b82e6dde84c
      size: 303
    - path: metrics.json
      md5: 5a9bfd1c08e09d38d43510fbdc173b6d
      size: 65
    - path: models/perm_imp.joblib
      md5: 8e0901db0183a768d6a459c5e15b25c5
      size: 145323
