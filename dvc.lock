schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling_0.csv
      md5: 201b3eb1d8d81aa6286466385528b3e2
      size: 342639
    - path: stages/data_split.py
      md5: 519fbe22a8ce712999f28010f3c56fe6
      size: 1606
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
    outs:
    - path: data/X_test.pkl
      md5: fd3007d1a7bdff44ff89571ebedd519e
      size: 93528
    - path: data/X_train.pkl
      md5: 56146d7dde8707b66619ce99e7cfcc20
      size: 278467
    - path: data/y_test.pkl
      md5: 745eb9da6d360516befe492af2787d41
      size: 30613
    - path: data/y_train.pkl
      md5: dbb125a59205f428a0b3e535efdfe83d
      size: 90598
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      md5: 56146d7dde8707b66619ce99e7cfcc20
      size: 278467
    - path: data/y_train.pkl
      md5: dbb125a59205f428a0b3e535efdfe83d
      size: 90598
    - path: stages/train.py
      md5: fdba70be0ebe776f64141b547ad118f1
      size: 2596
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        train:
          model_type: randomforest
          params:
            n_estimators: 15
            max_depth: 5
            warm_start: true
    outs:
    - path: model//clf-model
      md5: f10efb195513558a40c8f8a4f6bf3b07
      size: 62279
    - path: model//clf-model.mlem
      md5: 3274fbbb52365f2c2aa73de438386709
      size: 3089
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      md5: fd3007d1a7bdff44ff89571ebedd519e
      size: 93528
    - path: data/y_test.pkl
      md5: 745eb9da6d360516befe492af2787d41
      size: 30613
    - path: model//clf-model
      md5: f10efb195513558a40c8f8a4f6bf3b07
      size: 62279
    - path: model//clf-model.mlem
      md5: 3274fbbb52365f2c2aa73de438386709
      size: 3089
    - path: stages/eval.py
      md5: 0f8bd41fc66ef9117d6e3451a3ed3631
      size: 2700
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
        train:
          model_type: randomforest
          params:
            n_estimators: 15
            max_depth: 5
            warm_start: true
    outs:
    - path: eval_plots/cm.png
      md5: cce3c36513d288e140713f25eb71dbd4
      size: 10357
    - path: eval_plots/plots/sklearn/roc.json
      md5: 59a17a15de5128570d93181313fcae1f
      size: 60254
    - path: feat_imp.csv
      md5: 529a0422a8fe2fad101f9106f15e4573
      size: 308
    - path: metrics.json
      md5: 5631d12fa5cec7f13dd647424b82f0db
      size: 67
    - path: models/perm_imp.joblib
      md5: 55f35801aa3049c49ca16a0fdc527568
      size: 63787
