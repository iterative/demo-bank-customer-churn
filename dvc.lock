schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling_0.csv
      md5: 004783dcb3af3c2a4097c7b66ec69d49
      size: 342223
    - path: stages/data_split.py
      md5: 519fbe22a8ce712999f28010f3c56fe6
      size: 1606
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
    outs:
    - path: data/X_test.pkl
      md5: 23d3b89b9812fe05a6b6008826db830f
      size: 93528
    - path: data/X_train.pkl
      md5: 05d8dbf74f11102303a1638b26d720f8
      size: 278467
    - path: data/y_test.pkl
      md5: f76f71b3d6eb23b554fbd766d74be861
      size: 30613
    - path: data/y_train.pkl
      md5: d97756e62007e477a5079c921ccd31d1
      size: 90598
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      md5: 05d8dbf74f11102303a1638b26d720f8
      size: 278467
    - path: data/y_train.pkl
      md5: d97756e62007e477a5079c921ccd31d1
      size: 90598
    - path: stages/train.py
      md5: d54e4eaf7ad9f7c5bb9a740d48a2f9d2
      size: 2536
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        train:
          model_type: randomforest
          params:
            n_estimators: 150
            max_depth: 15
            warm_start: true
    outs:
    - path: model//clf-model
      md5: 2c6b814c7a697314cd774af6300318ea
      size: 9658331
    - path: model//clf-model.mlem
      md5: 7fe6095acf6907ec08ba5a590fb4bb78
      size: 3091
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      md5: 23d3b89b9812fe05a6b6008826db830f
      size: 93528
    - path: data/y_test.pkl
      md5: f76f71b3d6eb23b554fbd766d74be861
      size: 30613
    - path: model//clf-model
      md5: 2c6b814c7a697314cd774af6300318ea
      size: 9658331
    - path: model//clf-model.mlem
      md5: 7fe6095acf6907ec08ba5a590fb4bb78
      size: 3091
    - path: stages/eval.py
      md5: 0f8bd41fc66ef9117d6e3451a3ed3631
      size: 2700
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling_0.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
        train:
          model_type: randomforest
          params:
            n_estimators: 150
            max_depth: 15
            warm_start: true
    outs:
    - path: eval_plots/cm.png
      md5: 3505d51f937e37d34a7a07306fabbf28
      size: 10168
    - path: eval_plots/plots/sklearn/roc.json
      md5: fbd472f11cffdc13605a1810dcef16ac
      size: 43000
    - path: feat_imp.csv
      md5: b9519f6a1d191f2ba305350506540bb8
      size: 302
    - path: metrics.json
      md5: 9d07d8dd734b14049f4097c4e8c592d1
      size: 67
    - path: models/perm_imp.joblib
      md5: 7590e1aa0c2175c436a6cfdd2188b4fa
      size: 9657787
